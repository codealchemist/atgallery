<atg-title [sectionName]="sectionName"></atg-title>

<div *ngIf="errorMessage" class="alert alert-danger m" role="alert">
  {{errorMessage}}
</div>

<div
  id="lightgallery"
  class="gallery"
  infinite-scroll
  [infiniteScrollDistance]="1.2"
  [infiniteScrollThrottle]="200"
  (scrolled)="onScroll()"
>

  <span *ngFor="let tweet of tweets" class="media-container">
    <!-- video -->
    <div *ngIf="tweet.media.video_info">
      <div style="display:none" id="{{tweet.id}}">
        <video class="lg-video-object lg-html5" controls loop preload="none">
          <source src="{{tweet.media.video_info.variants[0].url}}" type="video/mp4">
          Your browser does not support HTML5 video.
        </video>
      </div>
      <a
        [attr.data-poster]="tweet.media.media_url"
        [attr.data-sub-html]="tweet.text"
        [attr.data-html]="'#'+tweet.id"
        class="gallery-item"
      >
        <img src="{{tweet.media.media_url}}:thumb">

        <!-- OPEN TWEET ICON -->
        <span
          class="open-tweet"
          (click)="openTweet(tweet.media.display_url, $event)"
        >
          <i class="glyphicon glyphicon-retweet"></i>
        </span>
      </a>
    </div>

    <!-- image -->
    <a
      *ngIf="!tweet.media.video_info"
      class="gallery-item"
      href="{{tweet.media.media_url}}:large"
      [attr.data-sub-html]="tweet.text"
    >
      <img src="{{tweet.media.media_url}}:thumb" class="gallery-item-image">

      <!-- OPEN TWEET ICON -->
      <span
        class="open-tweet"
        (click)="openTweet(tweet.media.display_url, $event)"
      >
        <i class="glyphicon glyphicon-retweet"></i>
      </span>
    </a>
  </span>

  <!-- row fillings -->
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
  <i class="row-filling"></i>
</div>

<div id="loading" *ngIf="loading">
  <img src="loading.gif" />
  <span>Loading...</span>
</div>

<footer>
  <div class="row">
    <div class="col-md-3"></div>

    <div class="col-md-6">
      <div *ngIf="!hasMore" id="the-end" class="alert alert-success" role="alert">
        {{endMessage}}
      </div>
    </div>

    <div class="col-md-3"></div>
  </div>
</footer>
